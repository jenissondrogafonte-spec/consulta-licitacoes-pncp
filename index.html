<script>
function renderizar(lista) {
    const container = document.getElementById('lista');
    container.innerHTML = lista.map(i => {
        const r = i.Resumo || {Homologados: 0, Fracassados: 0, Desertos: 0};
        const isVazio = i.CNPJ === "SEM-VENCEDOR";

        return `
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm border-0 ${isVazio ? 'bg-light' : ''}" style="border-top: 5px solid ${isVazio ? '#dc3545' : '#004494'} !important;">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="badge bg-secondary">${i.DataResult.split('T')[0]}</span>
                        <small class="text-muted fw-bold">UASG: ${i.UASG}</small>
                    </div>
                    
                    <h6 class="fw-bold text-primary text-truncate">${i.Orgao}</h6>
                    <p class="small mb-2"><i class="fas fa-file-alt me-1"></i> Edital: ${i.Edital}</p>

                    <div class="row g-1 mb-3 text-center">
                        <div class="col-4"><div class="p-1 bg-success text-white rounded small" style="font-size:0.7rem">HML: ${r.Homologados}</div></div>
                        <div class="col-4"><div class="p-1 bg-danger text-white rounded small" style="font-size:0.7rem">FRC: ${r.Fracassados}</div></div>
                        <div class="col-4"><div class="p-1 bg-warning text-dark rounded small" style="font-size:0.7rem">DST: ${r.Desertos}</div></div>
                    </div>

                    <div class="bg-white p-2 rounded border mb-3">
                        <small class="d-block fw-bold text-truncate">${i.Fornecedor}</small>
                        <small class="text-muted">${i.CNPJ}</small>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-success fw-bold">${isVazio ? '---' : 'R$ ' + calcTotal(i.Itens)}</span>
                        <button class="btn btn-sm btn-outline-primary" onclick="verDetalhes('${i.Licitacao}', '${i.CNPJ}')">Ver ${i.Itens.length} Itens</button>
                    </div>
                </div>
            </div>
        </div>`;
    }).join('');
}
</script>
